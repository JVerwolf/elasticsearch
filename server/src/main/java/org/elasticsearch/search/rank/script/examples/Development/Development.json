{
  "retriever": {
    "script_rank": {
      "retrievers": [
        {
          "standard": {"query": {"term": {"kw": {"value": "two"}}}}
        }
      ],
      "window_size": 10,
      "fields": ["kw","t"],
      "script": {
        "source": "List retrieverResults = ctx.results;\nList output = [];\nfor (int retrieverNum = 0; retrieverNum < retrieverResults.size(); ++retrieverNum) {\n    for (ScriptRankDoc scriptRankDoc : retrieverResults.get(retrieverNum)) {\n        int x = scriptRankDoc.getField(\"kw\").length();\n        int y = scriptRankDoc.getField(\"t\").length();\n        scriptRankDoc.setNewScore(x + y);\n        output.add(scriptRankDoc);\n    }\n}\noutput.sort((ScriptRankDoc sd1, ScriptRankDoc sd2) -> {\n    return sd1.newScore < sd2.newScore ? 1 : -1;\n});\nreturn output;",
        "params": {
        }
      }
    }
  },
  "fields": ["kw","t"],
  "_source": false
}